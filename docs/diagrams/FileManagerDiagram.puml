@startuml
!include Styles.puml
'https://plantuml.com/class-diagram

Package "filemanager"  <<Rectangle>>{
     Class Storage COLOR_STORAGE
     Class InstrumentDecoder COLOR_STORAGE
     Class InstrumentEncoder COLOR_STORAGE
     Class XYZDecoder COLOR_STORAGE
}

Class TextUi COLOR_UI

    Class FileLoadError COLOR_ERROR
    Class InvalidInstrumentInFileError COLOR_ERROR
    Class ErrorMessage COLOR_ERROR

Class "{abstract}\n Instrument" as Instrument COLOR_MODEL
Class InstrumentManager COLOR_MODEL


Class outside COLOR_WHITE
 outside -down[COLOR_STORAGE]-> Storage
 XYZDecoder -up[COLOR_STORAGE].|>InstrumentDecoder
 Storage -right[COLOR_STORAGE].> InstrumentEncoder
 Storage -down[COLOR_STORAGE].> InstrumentDecoder
 Storage -down[COLOR_STORAGE].> Instrument
 Storage -down[COLOR_STORAGE].> InstrumentManager
 Storage -up[COLOR_STORAGE].> FileLoadError
 Storage -up[COLOR_STORAGE].> ErrorMessage
 InstrumentEncoder -down[COLOR_STORAGE].> Instrument
 InstrumentEncoder -up[COLOR_STORAGE].> ErrorMessage

 InstrumentDecoder -down[COLOR_STORAGE].> InstrumentManager
 InstrumentDecoder -right[COLOR_STORAGE].> Instrument
 InstrumentDecoder -down[COLOR_STORAGE].> InvalidInstrumentInFileError
 XYZDecoder -up[COLOR_STORAGE].> Instrument
 XYZDecoder -down[COLOR_STORAGE].> InstrumentManager
 Storage -left[COLOR_STORAGE].> TextUi
 InstrumentDecoder -left[COLOR_STORAGE].> TextUi


note bottom of XYZDecoder: XYZDecoder = CryptoDecoder, ForexDecoder, \nEtfDecoder, StockDecoder

@enduml
